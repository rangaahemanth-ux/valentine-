<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tanmai's Sanctuary âœ¦ An Interactive Love Letter</title>
    <meta name="description" content="A 3D interactive love letter experience">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸŒ¸</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="style.css">

    <!-- Three.js r128 (stable) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <!-- Post-processing -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/EffectComposer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/RenderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/ShaderPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/postprocessing/UnrealBloomPass.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/CopyShader.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/shaders/LuminosityHighPassShader.js"></script>
    <!-- GLTF Loader -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/GLTFLoader.js"></script>
</head>
<body>
    <!-- â•â•â•â•â•â•â•â•â•â• LOADING SCREEN â•â•â•â•â•â•â•â•â•â• -->
    <div id="loading-screen">
        <div class="loader-container">
            <div class="loader">
                <div class="loader-sakura">
                    <span>ðŸŒ¸</span><span>âœ¦</span><span>ðŸŒ¸</span>
                </div>
                <h1 class="loader-title">Tanmai's Sanctuary</h1>
                <p class="loader-subtitle">Preparing your world...</p>
                <div class="loader-progress">
                    <div class="loader-bar" id="load-bar"></div>
                </div>
                <div class="loader-details">
                    <span class="loader-asset" id="load-asset">Initializing...</span>
                    <span class="loader-percentage" id="load-pct">0%</span>
                </div>
            </div>
        </div>
    </div>

    <!-- â•â•â•â•â•â•â•â•â•â• GAME CONTAINER â•â•â•â•â•â•â•â•â•â• -->
    <div id="game-container">
        <canvas id="game-canvas"></canvas>

        <!-- â•â•â•â•â•â• MAIN MENU â•â•â•â•â•â• -->
        <div id="main-menu" class="overlay-panel">
            <div class="menu-inner">
                <div class="menu-header">
                    <div class="title-sakura"><span>ðŸŒ¸</span><span>âœ¦</span><span>ðŸŒ¸</span></div>
                    <h1 class="game-title">Tanmai's Sanctuary</h1>
                    <p class="game-subtitle">An Interactive Love Letter</p>
                </div>
                <div class="menu-buttons">
                    <button id="btn-start" class="btn btn-primary"><i class="fas fa-play"></i> Enter the Sanctuary</button>
                    <button id="btn-continue" class="btn btn-secondary"><i class="fas fa-bookmark"></i> Continue Journey</button>
                </div>
                <div class="menu-controls">
                    <div class="ctrl"><kbd>WASD</kbd> Move</div>
                    <div class="ctrl"><kbd>Mouse</kbd> Look</div>
                    <div class="ctrl"><kbd>E</kbd> Interact</div>
                    <div class="ctrl"><kbd>Space</kbd> Jump</div>
                    <div class="ctrl"><kbd>ESC</kbd> Pause</div>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â• PAUSE MENU â•â•â•â•â•â• -->
        <div id="pause-menu" class="overlay-panel hidden">
            <div class="menu-inner compact">
                <h2 class="pause-title">Paused</h2>
                <div class="menu-buttons">
                    <button id="btn-resume" class="btn btn-primary"><i class="fas fa-play"></i> Resume</button>
                    <button id="btn-save" class="btn btn-secondary"><i class="fas fa-save"></i> Save</button>
                    <button id="btn-quit" class="btn btn-danger"><i class="fas fa-home"></i> Main Menu</button>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â• IN-GAME HUD â•â•â•â•â•â• -->
        <div id="hud" class="hidden">
            <!-- Top bar -->
            <div class="hud-top">
                <div class="hud-time">
                    <i class="fas fa-moon"></i>
                    <div>
                        <div id="hud-clock" class="hud-clock">12:00 AM</div>
                        <div id="hud-date" class="hud-date">Monday, Jan 1</div>
                    </div>
                </div>
                <div class="hud-stats">
                    <div class="hud-stat"><i class="fas fa-seedling" style="color:#66bb6a"></i> Day <span id="hud-plant-day">1</span></div>
                    <div class="hud-stat"><i class="fas fa-envelope" style="color:#ff6b8b"></i> <span id="hud-letters">0</span></div>
                    <div class="hud-stat"><i class="fas fa-camera" style="color:#ce93d8"></i> <span id="hud-photos">0</span></div>
                </div>
            </div>

            <!-- Crosshair -->
            <div class="crosshair">
                <div class="crosshair-dot"></div>
                <div class="crosshair-ring"></div>
            </div>

            <!-- Interaction hint -->
            <div id="interact-hint" class="interact-hint">
                <kbd>E</kbd> <span id="interact-text"></span>
            </div>

            <!-- Bottom bar -->
            <div class="hud-bottom">
                <div class="hud-actions">
                    <button class="act-btn" id="act-water" title="Water Plant"><i class="fas fa-tint"></i></button>
                    <button class="act-btn" id="act-letter" title="Letters"><i class="fas fa-feather-alt"></i></button>
                    <button class="act-btn" id="act-photo" title="Photo"><i class="fas fa-camera"></i></button>
                </div>
            </div>
        </div>

        <!-- â•â•â•â•â•â• MUSIC PLAYER BAR â•â•â•â•â•â• -->
        <div id="music-player" class="music-player">
            <div class="mp-left">
                <div class="mp-art">ðŸŽµ</div>
                <div class="mp-info">
                    <div class="mp-title" id="mp-title">No track loaded</div>
                    <div class="mp-artist" id="mp-artist">â€”</div>
                </div>
            </div>
            <div class="mp-center">
                <div class="mp-controls">
                    <button class="mp-btn" id="mp-prev"><i class="fas fa-backward"></i></button>
                    <button class="mp-btn mp-play" id="mp-play"><i class="fas fa-play"></i></button>
                    <button class="mp-btn" id="mp-next"><i class="fas fa-forward"></i></button>
                </div>
                <div class="mp-progress-row">
                    <span class="mp-time" id="mp-elapsed">0:00</span>
                    <div class="mp-progress" id="mp-progress-bar">
                        <div class="mp-progress-fill" id="mp-fill"></div>
                        <div class="mp-progress-thumb" id="mp-thumb"></div>
                    </div>
                    <span class="mp-time" id="mp-duration">0:00</span>
                </div>
            </div>
            <div class="mp-right">
                <button class="mp-btn mp-small" id="mp-shuffle"><i class="fas fa-random"></i></button>
                <button class="mp-btn mp-small" id="mp-repeat"><i class="fas fa-redo"></i></button>
                <div class="mp-volume">
                    <i class="fas fa-volume-up" id="mp-vol-icon"></i>
                    <input type="range" id="mp-volume" min="0" max="100" value="60" class="mp-vol-slider">
                </div>
                <button class="mp-btn mp-small" id="mp-list-toggle"><i class="fas fa-list"></i></button>
            </div>
            <!-- Track List Dropdown -->
            <div id="mp-tracklist" class="mp-tracklist hidden">
                <h4>ðŸŽ¶ Playlist</h4>
                <div id="mp-tracks"></div>
            </div>
        </div>

        <!-- â•â•â•â•â•â• MODALS â•â•â•â•â•â• -->
        <!-- Plant Modal -->
        <div id="modal-plant" class="modal">
            <div class="modal-box">
                <div class="modal-head">
                    <h2>ðŸŒ¸ Our Love Plant</h2>
                    <button class="modal-x" data-close>&times;</button>
                </div>
                <div class="modal-body">
                    <div class="plant-grid">
                        <div class="plant-visual">
                            <div class="plant-pot-ui"></div>
                            <div class="plant-stem-ui"></div>
                            <div class="plant-canopy-ui"></div>
                            <div class="plant-bloom-ui"></div>
                        </div>
                        <div class="plant-details">
                            <h3>Cherry Blossom Bonsai</h3>
                            <p>This plant grows with our love. Water it daily!</p>
                            <div class="bar-group">
                                <label>Health</label>
                                <div class="bar"><div class="bar-fill green" id="bar-health" style="width:85%"></div></div>
                                <span id="val-health">85%</span>
                            </div>
                            <div class="bar-group">
                                <label>Growth</label>
                                <div class="bar"><div class="bar-fill pink" id="bar-growth" style="width:30%"></div></div>
                                <span id="val-growth">30%</span>
                            </div>
                            <div class="bar-group">
                                <label>Days Alive</label>
                                <span class="big-num" id="val-days">1</span>
                            </div>
                            <div class="plant-btns">
                                <button class="btn btn-primary" id="btn-water"><i class="fas fa-tint"></i> Water</button>
                                <button class="btn btn-secondary" id="btn-fert"><i class="fas fa-leaf"></i> Fertilize</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Letter Modal -->
        <div id="modal-letter" class="modal">
            <div class="modal-box">
                <div class="modal-head">
                    <h2>ðŸ’Œ Love Letters</h2>
                    <button class="modal-x" data-close>&times;</button>
                </div>
                <div class="modal-body">
                    <div id="letters-list"></div>
                    <div class="letter-compose">
                        <h3>Write a New Letter</h3>
                        <textarea id="letter-input" placeholder="Pour your heart out..."></textarea>
                        <button class="btn btn-primary" id="btn-send-letter"><i class="fas fa-paper-plane"></i> Send</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- TV / Gallery Modal -->
        <div id="modal-tv" class="modal">
            <div class="modal-box wide">
                <div class="modal-head">
                    <h2>ðŸ“º Memory Gallery</h2>
                    <button class="modal-x" data-close>&times;</button>
                </div>
                <div class="modal-body">
                    <div class="gallery-main" id="gallery-main">
                        <p style="color:rgba(255,255,255,0.4)">Take photos with ðŸ“· to fill this gallery!</p>
                    </div>
                    <div class="gallery-thumbs" id="gallery-thumbs"></div>
                </div>
            </div>
        </div>

        <!-- Notifications -->
        <div id="notifs"></div>
    </div>

    <script src="game.js"></script>
</body>
</html>